(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["encuestacamaueh"],{"2c4a":function(t,e,a){"use strict";a("b81c")},"417f":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container",attrs:{idencuesta:t.encuesta_id}},[1!=t.formulario?a("div",{attrs:{formulario:t.formulario}},[a("b-alert",{staticClass:" m-5 py-5 display-1 text-center",attrs:{show:"",variant:"info"}},[a("h4",{staticClass:"alert-heading"},[a("b",[t._v("Esta encuesta ya fue contestada!")])]),a("hr"),a("p",{staticClass:"mb-0"},[t._v(" Recuerda que las encuestas deben contestarse dentro del horario establecido para cada encuesta. ")])])],1):a("div",[a("form",{attrs:{method:"post",id:"formulario",novalidate:"true"},on:{submit:function(e){return e.preventDefault(),t.postEncuesta(e)}}},[a("main",{staticClass:"container",attrs:{datos:t.datos,id:t.datos.encuesta_id}},[a("div",{staticClass:"row mt-4"},[a("h1",{staticClass:"text-uppercase pt-4 text-center"},[t._v(" "+t._s(t.datos.encuesta_nombre)+" ")]),a("hr",{staticClass:"double"})]),a("div",{staticClass:"container-fluid mb-5"},[a("div",{staticClass:"cuadro-glosa"},[a("h3",[t._v(t._s(t.datos.encuesta_remitente))]),a("br"),a("p",{ref:"glosa",domProps:{innerHTML:t._s(t.datos.encuesta_texto_inicio)}})])]),a("div",{staticClass:"border"},[t._l(t.datos.grupo_preguntas,(function(e,s){return a("div",{key:s,staticClass:"container-fluid mb-5",attrs:{id:e.grupo_id}},[a("div",{staticClass:"mb-3"},[a("h3",{staticClass:"text-uppercase mb-4 p-1 h3_formulario",attrs:{id:"grupo["+e.grupo_id+"]"}},[t._v(t._s(e.grupo_nombre))]),a("div",t._l(e.preguntas,(function(e,s){return a("div",{key:s,attrs:{id:e.pregunta_id}},[t._v(" "+t._s(e.orden_pregunta)+". "+t._s(e.pregunta_glosa)+" "),null!=e.pregunta_ayuda?a("i",{staticClass:"fas fa-question-circle",on:{click:function(a){return t.toggleAnswer(e.pregunta_id)}}}):t._e(),a("p",{directives:[{name:"show",rawName:"v-show",value:t.togglerAnswer&&t.toggledAnswerIndex===e.pregunta_id,expression:"togglerAnswer && toggledAnswerIndex===pregunta.pregunta_id"}],staticClass:"my-4 p-3 ayuda_texto"},[t._v(" "+t._s(e.pregunta_ayuda)+" ")]),a("div",{staticClass:"row mt-3 mb-5"},t._l(e.respuestas,(function(s,n){return a("div",{key:n,staticClass:"col-12 col-sm-4",attrs:{id:"respuestas",orderBy:s.pregunta_orden}},[null!=s.respuesta_glosa?a("label",{staticClass:"form-label",attrs:{id:s.respuesta_id}},[t._v(t._s(s.respuesta_glosa))]):t._e(),a("input",{directives:[{name:"model",rawName:"v-model",value:s.valor_respuesta,expression:"respuesta.valor_respuesta"}],staticClass:"form-control",attrs:{type:"number",placeholder:"Ingrese la cantidad solicitada",name:e.pregunta_id,id:s.respuesta_id,required:"","error-messages":t.errors},domProps:{value:s.valor_respuesta},on:{input:function(e){e.target.composing||t.$set(s,"valor_respuesta",e.target.value)}}})])})),0)])})),0)])])})),a("div",{staticClass:"row"},[a("div",{staticClass:"col text-center"},[(t.submitted,a("b-alert",{attrs:{variant:t.alertVariant,show:""}},[t._v(t._s(this.text)+" ")])),t._m(0),a("p",{staticClass:"output"})],1)])],2)])])])])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"btn btn-primary",attrs:{type:"submit"}},[a("i",{staticClass:"fas fa-paper-plane mr-2"}),t._v(" Publicar ")])}],o=a("2b0e"),r=a("bc3a"),i=a.n(r),c=a("216c"),u=o["default"].extend({name:"EncuestasHtml",components:{Nav:c["a"]},data(){return{datos:{},url:"",path:[],formulario:null,text:"",alertVariant:"",respuesta:{valor_respuesta:null},idencuesta:null,reinicioEncuesta:[],errors:[],submitted:!1,valor_respuesta:null,togglerAnswer:!1,toggledAnswerIndex:{},grupo_id:null}},props:{encuesta_id:{type:Number,required:!0}},methods:{async getEncuesta(){i()({method:"post",url:"http://192.168.60.105:3007/ugcc-encuestas/encuesta",data:{id:this.encuesta_id}}).then(t=>{this.datos=t.data.body,this.formulario=t.data.ok})},async postEncuesta(t){await i.a.post("http://192.168.60.105:3007/ugcc-encuestas/guardar-encuesta",this.datos).then(t=>{setTimeout(()=>this.$router.push({path:"/"}),1e3),this.alertVariant="success",this.text="Envío Exitoso!",console.warn(t)}).catch(t=>{this.alertVariant="danger",this.text="Error en el envío",console.warn(t)}),t.preventDefault()},toggleAnswer(t){this.togglerAnswer?(this.togglerAnswer=!1,this.toggledAnswerIndex=-1):(this.togglerAnswer=!0,this.toggledAnswerIndex=t)}},mounted(){this.getEncuesta()}}),l=u,d=(a("60d3"),a("2877")),p=Object(d["a"])(l,s,n,!1,null,"77088da5",null);e["a"]=p.exports},"60d3":function(t,e,a){"use strict";a("a1b9")},7045:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container mt-5"},[a("h1",{staticClass:"text-uppercase pt-4 text-center"},[t._v("Reenviar Encuesta")]),a("hr",{staticClass:"double"}),a("b-form",[a("div",{staticClass:"grupo mb-5"},[a("b-form-group",{attrs:{id:"input-group-1",label:"Selecciona Servicio de Salud","label-for":"input-1"}},[a("b-form-select",{attrs:{id:"input-1",required:""},on:{change:function(e){return t.getEstablecimiento()}},model:{value:t.servicio,callback:function(e){t.servicio=e},expression:"servicio"}},[t._l(t.serviciosalud,(function(e){return a("b-form-select-option",{key:e.servicio_id,attrs:{value:e.servicio_id}},[t._v(t._s(e.servicio_nombre))])}))],2)],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Selecciona Establecimiento","label-for":"input-2"}},[a("b-form-select",{attrs:{id:"input-2",required:""},on:{change:function(e){t.mostrarEncuesta(),t.getUnidad(),t.getTipoEncuesta(),t.disabled=!1}},model:{value:t.establecimiento,callback:function(e){t.establecimiento=e},expression:"establecimiento"}},[t._l(t.establecimientos,(function(e){return a("b-form-select-option",{key:e.establecimiento_id,attrs:{value:e.establecimiento_id}},[t._v(t._s(e.establecimiento_nombre))])}))],2)],1),a("b-button",{attrs:{type:"submit",variant:"primary",disabled:t.disabled},on:{click:function(e){e.preventDefault(),t.mostrarEncuesta(),t.mostrar=!0}}},[t._v("Filtrar")])],1),t.mostrar?a("div",{staticClass:"grupo2"},[a("b-form-group",{attrs:{id:"input-group-3",label:"Selecciona Unidad","label-for":"input-3"}},[a("b-form-select",{attrs:{id:"input-3"},on:{change:function(e){return t.mostrarEncuesta()}},model:{value:t.unidad,callback:function(e){t.unidad=e},expression:"unidad"}},[t._l(t.unidades,(function(e){return a("b-form-select-option",{key:e.unidad_id,attrs:{value:e.unidad_id}},[t._v(t._s(e.unidad_nombre))])}))],2)],1),a("b-form-group",{attrs:{id:"input-group-4",label:"Selecciona tipo de Encuesta","label-for":"input-4"}},[a("b-form-select",{attrs:{id:"input-4"},on:{change:function(e){return t.mostrarEncuesta()}},model:{value:t.encuesta,callback:function(e){t.encuesta=e},expression:"encuesta"}},[t._l(t.encuestas,(function(e){return a("b-form-select-option",{key:e.encuesta_id,attrs:{value:e.encuesta_id}},[t._v(t._s(e.encuesta_glosa))])}))],2)],1),a("b-form-group",{staticClass:"btn-group-lg",attrs:{id:"input-group-6",label:"Selecciona estado","label-for":"input-6"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.estado_envio,expression:"estado_envio"}],attrs:{type:"radio",value:"Contestada"},domProps:{checked:t._q(t.estado_envio,"Contestada")},on:{change:[function(e){t.estado_envio="Contestada"},function(e){return t.mostrarEncuesta()}]}}),a("label",{attrs:{for:"Contestada"}},[t._v(" Contestada ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.estado_envio,expression:"estado_envio"}],attrs:{type:"radio",id:"noContestada",value:"NO_CONTESTADA"},domProps:{checked:t._q(t.estado_envio,"NO_CONTESTADA")},on:{change:[function(e){t.estado_envio="NO_CONTESTADA"},function(e){return t.mostrarEncuesta()}]}}),a("label",{attrs:{for:"NoContestada"}},[t._v(" No Contestadas")]),a("br"),t._v(" "),a("span",[t._v("cual: "+t._s(t.estado_envio))])])],1):t._e(),t.mostrar?a("form",{attrs:{method:"post"},on:{submit:function(e){return e.preventDefault(),t.reenviarEncuesta()}}},[a("table",{staticClass:"table b-table table-striped b-table-stacked-md table-outlined"},[a("thead",[a("tr",[a("th",[t._v("Nombre de Encuesta"),a("br")]),a("th",[t._v("Nombre de Establecimiento"),a("br")]),a("th",[t._v("Nombre de Unidad"),a("br")]),a("th",[t._v("Estado"),a("br")]),a("th",[t._v("Reenviar "),a("br"),a("b-form-checkbox",{model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}})],1)])]),a("tbody",t._l(t.datos,(function(e,s){return a("tr",{key:s},[a("td",[t._v(t._s(e.encuesta_glosa))]),a("td",[t._v(t._s(e.establecimiento_nombre))]),a("td",[t._v(t._s(e.unidad_nombre))]),a("td",[t._v(t._s(e.estado_envio))]),a("td",[a("b-form-checkbox",{attrs:{value:e.envio_id,number:""},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},[a("br")])],1)])})),0)]),t.mostrar?a("div",{staticClass:"my-4 text-center"},[a("button",{staticClass:"btn btn-primary",attrs:{type:"submit",method:"post"}},[a("i",{staticClass:"fas fa-paper-plane mr-2",attrs:{"data-v-7aa65f88":""}}),t._v(" Reenviar ")]),t._v(" "),a("button",{staticClass:"btn btn-dark",attrs:{type:"reset"},on:{click:function(e){return e.preventDefault(),t.onReset(e)}}},[t._v(" Limpiar")]),t.seen?a("div",{staticClass:"alert alert-info my-3",attrs:{role:"alert"}},[t._v(" La encuesta ha sido reenviada! ")]):t._e()]):t._e()]):t._e()])],1)},n=[],o=a("2b0e"),r=a("bc3a"),i=a.n(r),c=o["default"].extend({name:"ReenviarEncuesta",data(){return{mostrar:!1,disabled:!0,servicio:null,serviciosalud:[],establecimiento:null,establecimientos:[],unidad:null,unidades:[],encuesta:null,encuestas:[],datos:[],estado_envio:null,checked:[],seen:!1}},computed:{selectAll:{get(){if(this.datos&&this.datos.length>0){let t=!1;for(const e of this.datos)if(this.checked.includes(e.envio_id)?this.allChecked=!1:this.allChecked=!0,!t)break;return t}return!1},set(t){const e=[];t?this.datos.forEach(t=>{e.push(t.envio_id)}):this.checked=[],console.log(e),this.checked=e}}},methods:{getServicioSalud(){i.a.get("http://192.168.60.105:3007/ugcc-encuestas/obtener-servicios-salud/").then(t=>{this.serviciosalud=t.data.data}).catch((function(t){console.log(t+"No se pueden encontrar servicios de salud relacionados")}))},getEstablecimiento:async function(){try{const t=await i.a.post("http://192.168.60.105:3007/ugcc-encuestas/obtener-establecimientos/"+this.servicio).then(t=>this.establecimientos=t.data.data);console.log(t)}catch(t){alert("No se pueden encontrar establecimiento de salud relacionados")}},getUnidad:async function(){try{const t=await i.a.post("http://192.168.60.105:3007/ugcc-encuestas/obtener-unidades/"+this.establecimiento).then(t=>this.unidades=t.data.data);console.log(t)}catch(t){alert("No se pueden encontrar unidades relacionadas")}},getTipoEncuesta:async function(){try{const t=await i.a.get("http://192.168.60.105:3007/ugcc-encuestas/obtener-tipos-encuestas").then(t=>this.encuestas=t.data.data);console.log(t)}catch(t){alert("No se pueden encontrar tipo de encuestas relacionadas")}},mostrarEncuesta(){i()({method:"post",url:"http://192.168.60.105:3007/ugcc-encuestas/obtener-encuestas-reenvio",data:{establecimiento_id:this.establecimiento,unidad_id:this.unidad,encuesta_id:this.encuesta,estado_envio:this.estado_envio}}).then(t=>{this.datos=t.data.data,this.mostrar}).catch((function(t){console.log(t)}))},async reenviarEncuesta(t){let e=[];for(const a of this.checked)e.push({envio_id:a});this.seen=!0,i()({method:"post",url:"http://192.168.60.105:3007/ugcc-encuestas/reenviar-encuestas",data:e}).then(t=>console.log(t)).catch(t=>console.error("Error:",t)).then(t=>console.log("Success:",t))},onReset(t){t.preventDefault(),this.unidades=[],this.encuestas=[],this.datos=[]}},created(){this.mostrarEncuesta()},mounted(){this.getServicioSalud()}}),u=c,l=(a("2c4a"),a("2877")),d=Object(l["a"])(u,s,n,!1,null,"0b021b8a",null);e["default"]=d.exports},a1b9:function(t,e,a){},b81c:function(t,e,a){},baf1:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("EncuestasHtml",{attrs:{datoEncuesta:t.datos,encuesta_id:t.encuesta_id}})],1)},n=[],o=a("2b0e"),r=a("417f"),i=o["default"].extend({name:"EncuestaUEH",components:{EncuestasHtml:r["a"]},props:{datoEncuesta:{type:Array}},data(){return{encuesta_id:2,datos:[]}}}),c=i,u=a("2877"),l=Object(u["a"])(c,s,n,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=encuestacamaueh.3c0d8a58.js.map